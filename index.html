<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lifeway App</title>

    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">

    <!-- Styling -->
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #ffffff;
            margin: 0;
            padding: 0;
        }

        #introVideo, #mainContent {
            transition: opacity 1s ease;
        }

        #mainContent {
            display: none;
            opacity: 0;
        }
    </style>
</head>
<body>

    <!-- Video animation -->
    <video id="introVideo" autoplay muted playsinline style="width:100%; max-width:400px; display:block; margin: 20px auto; opacity:1;">
        <source src="animation/Animation-Lifeway-Logo.mp4" type="video/mp4">
        Video not found!
    </video>

    <!-- Main content hidden initially -->
    <div id="mainContent">
        <img src="icons/icon-192.png" alt="App Logo" style="width:150px; display:block; margin: 20px auto;">
        <h1>Hello ðŸ‘‹</h1>
        <p>This is the first version of your app.</p>
    </div>

    <!-- Service Worker registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').then(reg => {
                console.log('Service Worker Registered');
                reg.update(); // Force check for updates
            });
        }
    </script>

    <!-- Fade transition and slow video -->
    <script>
        const video = document.getElementById('introVideo');
        const content = document.getElementById('mainContent');

        // Slow down video to 60% speed
        video.playbackRate = 0.6;

        video.onended = () => {
            // Fade out video
            video.style.opacity = 0;

            // After fade, hide video and show main content
            setTimeout(() => {
                video.style.display = 'none';
                content.style.display = 'block';

                // Fade in main content
                setTimeout(() => {
                    content.style.opacity = 1;
                }, 50); // small delay to trigger transition
            }, 1000); // match transition duration
        };
    </script>

</body>
</html>
